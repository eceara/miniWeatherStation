# miniWeatherStation#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SH1106.h>
#include <dht.h>

#include <Adafruit_BMP085_U.h>
#include <Adafruit_BMP085.h>

//BMP180 icin 3.3V gerilim pinini kullaniyoruz. (5V DEGİL!!)
//SCL - Analog 5
//SDA - Analog 4

Adafruit_BMP085 bmp;

//OLED SPI yazilimi kullananlar icin pinler
#define OLED_MOSI   9
#define OLED_CLK   10
#define OLED_DC    11
#define OLED_CS    12
#define OLED_RESET 13
Adafruit_SH1106 display(OLED_MOSI, OLED_CLK, OLED_DC, OLED_RESET, OLED_CS);

dht DHT; //DHT11 kullandigimizi belirtiyoruz.
#define DHT11_PIN 7 //DHT nin bagli oldugu pin belirtiliyor.

#if (SH1106_LCDHEIGHT != 64)
#error("Height incorrect, please fix Adafruit_SH1106.h!");
#endif

//gunes logosu icin 32x32 resim
// width x height = 32,32
static const uint8_t image_logoSun[] PROGMEM = {
  B00000000, B00000000, B00000000, B00000000,
  B00000000, B00000000, B10000000, B00000000,
  B00000000, B00000000, B10000000, B00000000,
  B00000110, B00000000, B10000000, B00001000,
  B00000010, B00000000, B00000000, B00111000,
  B00000011, B00000000, B00000000, B01110000,
  B00000000, B00000000, B00000000, B01100000,
  B00000000, B00000111, B11000000, B00000000,
  B00000000, B00011111, B11110000, B00000000,
  B00000000, B01110000, B00011100, B00000000,
  B00000000, B11100000, B00000110, B00000000,
  B00000000, B11000000, B00000011, B00000000,
  B11000001, B10000000, B00000001, B00000000,
  B01110001, B10111111, B11111101, B10000000,
  B00010011, B00111000, B01110101, B10011110,
  B00000011, B00111100, B01111000, B10001000,
  B00000011, B00001000, B00000000, B11000000,
  B00000011, B00100000, B00001100, B11000000,
  B00000001, B00011100, B01111000, B10000000,
  B00000001, B10001111, B11100001, B10000000,
  B00000000, B10000000, B00000001, B10000000,
  B00000000, B11000000, B00000011, B00000000,
  B00011000, B01110000, B00001110, B00000000,
  B00111000, B00111100, B00111100, B00001100,
  B01100000, B00011111, B11110000, B00000110,
  B00000000, B00000000, B00000000, B00000011,
  B00000000, B00001000, B00000100, B00000000,
  B00000000, B00001000, B00000100, B00000000,
  B00000000, B00011000, B00000110, B00000000,
  B00000000, B00011000, B00000110, B00000000,
  B00000000, B00011000, B00000010, B00000000,
  B00000000, B00000000, B00000000, B00000000,

};

//yagmur logosu icin 32x32 resim
// width x height = 32,32
static const uint8_t image_rain[] PROGMEM = {
  B00000000, B00010000, B00000000, B00000000,
  B00000000, B00010000, B00000000, B00000000,
  B00000000, B00000000, B00000000, B00000000,
  B00000000, B00111100, B00110000, B00000000,
  B00001001, B11111111, B00100000, B00000000,
  B00000011, B11100111, B10000000, B00000000,
  B00000111, B00000001, B11000000, B00000000,
  B00001110, B00000011, B11111000, B00000000,
  B00001100, B00001111, B11111110, B00000000,
  B00001100, B00011110, B00001111, B00000000,
  B00011100, B00111000, B00000011, B10000000,
  B11011000, B01110000, B00000001, B11000000,
  B00011000, B01100000, B00000001, B11111000,
  B00011100, B11000000, B00000110, B00111100,
  B00001111, B11000000, B00001000, B00001110,
  B00001111, B11000000, B00010000, B00000110,
  B00011100, B01000000, B00000000, B00000111,
  B00111100, B00000000, B00000000, B00000011,
  B01111100, B00000000, B00000000, B00000011,
  B11100000, B00000000, B00000000, B00000011,
  B11000000, B00000000, B00000000, B00000011,
  B11000000, B00000010, B00000000, B00000110,
  B11100000, B01000010, B00100010, B00001110,
  B01111110, B01000100, B00100010, B00011100,
  B00111100, B10000100, B01000100, B11111000,
  B00000000, B00001000, B00001100, B11110000,
  B00000000, B00000000, B10001000, B00000000,
  B00000010, B00010001, B00000000, B00000000,
  B00000010, B00100001, B00000000, B00000000,
  B00000000, B00100010, B00100000, B00000000,
  B00000000, B00000010, B00000000, B00000000,
  B00000000, B01000000, B00000000, B00000000,

};

//gokkusagı logosu icin 32x32 resim
// width x height = 32,32
static const uint8_t image_rainbow[] PROGMEM = {
  B00000000, B00000000, B00000000, B00000000,
  B00000000, B00000000, B00001100, B00000000,
  B00000000, B00000000, B00001100, B00000000,
  B00000000, B00000000, B00001100, B00000000,
  B00000000, B00000110, B00001100, B00011000,
  B00000000, B00000111, B00000000, B00111000,
  B00000000, B00000011, B00011110, B00110000,
  B00000000, B00000000, B01111111, B10000000,
  B00000000, B00000000, B11100001, B11000000,
  B00000000, B00000000, B11000000, B11000000,
  B00000000, B00000000, B00000000, B01100000,
  B00000000, B00001111, B11110000, B01101111,
  B00000000, B01111111, B11111110, B01101111,
  B00000001, B11110000, B00001111, B10000000,
  B00000011, B10001111, B11110001, B11000000,
  B00000111, B00111111, B11111100, B11100000,
  B00001100, B11111000, B00011111, B00110000,
  B00011001, B11000111, B11100011, B10011000,
  B00111011, B10011111, B11111001, B11011100,
  B00110111, B01111000, B00011110, B11101100,
  B01101110, B11100000, B00000111, B01110110,
  B01101101, B11000000, B00000011, B10110110,
  B11101101, B10000000, B00000001, B10110111,
  B11011011, B10000000, B00000001, B11011011,
  B11011011, B00000000, B00000000, B11011011,
  B11011011, B00000000, B00000000, B11011011,
  B11011011, B00000000, B00000000, B11011011,
  B00000000, B00000000, B00000000, B00000000,
  B00000000, B00000000, B00000000, B00000000,
  B11111111, B11111111, B11111111, B11111111,
  B11111111, B11111111, B11111111, B11111111,
  B00000000, B00000000, B00000000, B00000000,

};

// ana ekranda 32x32lik termometre resmi
// width x height = 32,32
static const uint8_t image_thermometer[] PROGMEM = {
  B00000000, B01111111, B11111110, B00000000,
  B00000000, B11000000, B00000011, B00000000,
  B00000000, B10000000, B00000001, B00000000,
  B00000000, B10000000, B00000001, B00000000,
  B00000000, B10000001, B10000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10011010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10011010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10000011, B11000001, B00000000,
  B00000000, B10011011, B11000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10011010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10011010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10000010, B01000001, B00000000,
  B00000000, B10000110, B01100001, B00000000,
  B00000000, B10000100, B00100001, B00000000,
  B00000000, B10000100, B00100001, B00000000,
  B00000000, B10000100, B00100001, B00000000,
  B00000000, B10000110, B01100001, B00000000,
  B00000000, B10000011, B11000001, B00000000,
  B00000000, B10000000, B00000001, B00000000,
  B00000000, B10000000, B00000001, B00000000,
  B00000000, B11000000, B00000011, B00000000,
  B00000000, B01111111, B11111110, B00000000,

};

//ana ekranda 32x32lik nem belirtmesi icin su damlasi resmi
// width x height = 32,32
static const uint8_t image_waterDrop[] PROGMEM = {
  B00000000, B00000000, B00000000, B00000000,
  B00000000, B00000000, B10000000, B00000000,
  B00000000, B00000001, B10000000, B00000000,
  B00000000, B00000011, B10000000, B00000000,
  B00000000, B00000111, B11000000, B00000000,
  B00000000, B00001111, B11000000, B00000000,
  B00000000, B00011111, B11000000, B00000000,
  B00000000, B00011100, B11100000, B00000000,
  B00000000, B00111000, B11110000, B00000000,
  B00000000, B00111000, B01110000, B00000000,
  B00000000, B01110000, B00111000, B00000000,
  B00000000, B11110000, B00111100, B00000000,
  B00000000, B11100000, B00011100, B00000000,
  B00000000, B11100000, B00001110, B00000000,
  B00000001, B11000000, B00001111, B00000000,
  B00000001, B11000000, B00000111, B00000000,
  B00000011, B10000000, B00000011, B10000000,
  B00000011, B10010000, B00000011, B11000000,
  B00000011, B10110000, B00000001, B11000000,
  B00000011, B00110000, B00000001, B11000000,
  B00000111, B00110000, B00000000, B11100000,
  B00000111, B00110000, B00000000, B11100000,
  B00000111, B00110000, B00000000, B11100000,
  B00000011, B00110000, B00000000, B11000000,
  B00000011, B10011000, B00000001, B11000000,
  B00000011, B10001100, B00000001, B11000000,
  B00000001, B11000110, B00000011, B10000000,
  B00000001, B11100000, B00000111, B10000000,
  B00000000, B11111000, B00011111, B00000000,
  B00000000, B01111111, B11111110, B00000000,
  B00000000, B00011111, B11111000, B00000000,
  B00000000, B00000111, B11100000, B00000000,

};

//ana ekranda 32x32lik basinc icin barometre resmi
// width x height = 32,30
static const uint8_t image_barometer_3[] PROGMEM = {
  B00000000, B00000000, B00000000, B00000000,
  B00000000, B00001111, B11110000, B00000000,
  B00000000, B01111111, B11111110, B00000000,
  B00000000, B11110000, B00001111, B00000000,
  B00000001, B11000000, B00000011, B10000000,
  B00000011, B00000000, B00000000, B11000000,
  B00000110, B11000000, B00000000, B01100000,
  B00001101, B11000000, B00000000, B00110000,
  B00001101, B11000000, B00000000, B00110000,
  B00011011, B11000000, B00000000, B00011000,
  B00011011, B11000000, B00000000, B00011000,
  B00110111, B11000000, B00111000, B00001100,
  B00110111, B11000001, B11000000, B00001100,
  B00110111, B10011111, B00000000, B00001100,
  B00110111, B01111100, B00000000, B00001100,
  B00110111, B01110000, B00000000, B00001100,
  B00110111, B10000000, B00000100, B00001100,
  B00110111, B11000000, B00000000, B00001100,
  B00110111, B11000000, B00000000, B00001100,
  B00011111, B00000000, B00000100, B00011000,
  B00011011, B00000000, B00000000, B00011000,
  B00011101, B11000000, B00000000, B00111000,
  B00001101, B11000000, B00000000, B00110000,
  B00000110, B11000000, B00000000, B01100000,
  B00000011, B00000000, B00000000, B11000000,
  B00000001, B11000000, B00000001, B11000000,
  B00000000, B11100000, B00000111, B00000000,
  B00000000, B01111111, B11111110, B00000000,
  B00000000, B00001111, B11110000, B00000000,
  B00000000, B00000000, B00000000, B00000000,

};

void setup()   {
  Serial.begin(9600);

  if (!bmp.begin()) {
    Serial.println("Could not find a valid BMP085 sensor, check wiring!");  //bmp nin calisip calismadigini kontrol ediyoruz...
    while (1) {}
  }

  //ekrani baslatiyoruz
  display.begin(SH1106_SWITCHCAPVCC);

  //ekranda resim gormemizi saglayan komut
  //ekranda yazisi ne kadar sureyle tuttugumuz
  display.display();
  delay(2000);

  // ekrandan silme islemi yapan komut
  display.clearDisplay();

  //gunes logosunu ekrana yazdirma komutu
  display.drawBitmap(0, 0,  image_logoSun, 32, 32, 1);
  display.display();

  //yagmur logosunu ekrana yazdirma komutu
  display.drawBitmap(50, 0, image_rain, 32, 32, 1);
  display.display();

  //gokkusagi logosunu ekrana yazdirma komutu
  display.drawBitmap(90, 0, image_rainbow, 32, 32, 1);
  display.display();

  display.drawPixel(10, 10, WHITE);

  //goruntu ara bellegini ekrana gösterin
  //herhangi bir cizim yaptiktan sonra ekrani cagirmalisin
  //ekranda istediklerimizi gorebilmek icin

  //logo ekranina projenin adini yaziyoruz...
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(5, 40);
  display.println("MINI HAVA ISTASYONU");

  //logo ekranina renklam yazisini ekliyoruz...
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(20, 50 );
  display.println("ROBOTISTAN.COM");

  display.display();
  delay(3000);
  display.clearDisplay();
}

void loop() {

  /*// termometre iconunun ana ekrandaki konumunu ayarliyoruz.
  display.drawBitmap(0, 0,  image_thermometer, 32, 32, 1);
  display.display();

//ekrana "Temp." yazisini yazdiriyoruz.
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(45, 0);
  display.println("Sicaklik");
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(45,60);

  //ekrana sicaklik ,nem ve basinc anlik degerlerini yazdiriyoruz...
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(45, 45);
  display.println(DHT.temperature);
  display.display();
  delay(1000);
  display.clearDisplay();

  //nem icin su damlasi iconunun ana ekrandaki konumunu ayarliyoruz.
  display.drawBitmap(0, 0,  image_waterDrop, 32, 32, 1);
  display.display();

  //ekrana "Nem" yazisini yazdiriyoruz.
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(45, 0);
  display.println("Nem");

  int chk = DHT.read11(DHT11_PIN);
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(45, 45);
  display.println(DHT.humidity);
  display.display();
  delay(1000);
  display.clearDisplay();
  
  //basınc icin barometre iconunun ana ekrandaki konumunu ayarliyoruz.
  display.drawBitmap(0, 0, image_barometer_3, 32, 30, 1);
  display.display();

  //ekrana "basinc" yazisini yazdiriyoruz.
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(45, 0);
  display.println("Basinc");
  display.display();

  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(45, 45);
  display.println(bmp.readPressure());
  display.display();
  display.clearDisplay();

  delay(1000);*/
}
